<h2>Available Files</h2>

<p *ngIf="(sourceFiles$ | async).length == 0">No files available</p>

<table *ngIf="(sourceFiles$ | async).length > 0">
    <tr>
        <th *ngIf="showUsername$ | async">User</th>
        <th></th>
        <th>Filename</th>
        <th>Uploaded</th>
        <th>Size</th>
        <th class="text-center">Download</th>
        <th class="text-center">Delete</th>
        <th class="text-center"><input type="checkbox" class="align-middle" (click)="toggleFiles(toggle.checked)" #toggle /></th>
    </tr>

    <tr *ngFor="let file of files; trackBy: trackByFile" [@listItemAnimation]>
        <td *ngIf="showUsername$ | async" class="align-middle">{{file.location.username}}</td>
        <td class="align-middle"><app-file-thumbnail [relativeFilePath]="file.location.relativePath"></app-file-thumbnail></td>
        <td class="align-middle">{{file.location.filename}}</td>
        <td class="align-middle">{{file.creationTime | relativeDate}}</td>
        <td class="align-middle">{{file.sizeInBytes | fileSize}}</td>
        <td class="align-middle text-center text-success">
            <mat-icon [inline]="true" (click)="downloadSingle(file)">cloud_download</mat-icon>
        </td>
        <td class="align-middle text-center text-danger">
            <mat-icon [inline]="true" (click)="deleteSingle(file)">delete</mat-icon>
        </td>
        <td class="align-middle text-center"><input type="checkbox" class="mt-2" [(ngModel)]="file.isChecked" /></td>
    </tr>

    <tr>
        <td *ngIf="showUsername$ | async"></td>
        <td colspan="7" class="text-right">
            <button type="submit" (click)="downloadSelected()" mat-button>
                <mat-icon [inline]="true">cloud_download</mat-icon> Download Selected
            </button>
            <button type="submit" (click)="deleteSelected()" mat-button>
                <mat-icon [inline]="true">delete</mat-icon> Delete Selected
            </button>
        </td>
    </tr>
</table>
